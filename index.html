<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>손익분기점 매출 분석</title>
    <link rel="stylesheet" href="css/desktop.css">
    <link rel="stylesheet" media="screen and (max-width:400px)" href="css/mobil.css">
</head>
<body>
    <div class="header">
        <h1>CVP 분석</h1>
        <h2>(손익분기점 매출 구하기)</h2>
    </div>
    <div class="mid-text">
        <h3>사업을 시작했지만 적자가 지속될 경우 한 번 해보세요.</h3>
        <h3>고정비 변동비 구분에 따라 결과값이 달라질 수 있으니 참고만 하시기 바랍니다.</h3>
        <h3>월 단위로 금액을 입력하세요.</h3>
    </div>
    <table>
        <tr>
            <td colspan="2">현재 매출액</td>
            <td><input id="sales" type="number" min="0"></td>
        </tr>
        <tr class="hidden-tr">
            <td class="hidden-tr"></td>
        </tr>
        <tr>
            <td rowspan="2">변동비</td>
            <td>재료비</td>
            <td><input id="cost_1" type="number" min="0" oninput="inputValue()"></td>
        </tr>
        <tr>
            <td>기타</td>
            <td><input id="cost_2" type="number" min="0" oninput="inputValue()"></td>
        </tr>
        <tr>
            <td rowspan="3">고정비</td>
            <td>임차료</td>
            <td><input id="cost_3" type="number" min="0" oninput="inputValue()"></td>
        </tr>
        <tr>
            <td>인건비</td>
            <td><input id="cost_4" type="number" min="0" oninput="inputValue()"></td>
        </tr>
        <tr>
            <td>기타</td>
            <td><input id="cost_5" type="number" min="0" oninput="inputValue()"></td>
        </tr>
        <tr>
            <td colspan="2">비용 총계</td>
            <td id="total_cost"></td>
        </tr>
        <tr class="hidden-tr">
            <td class="hidden-tr"></td>
        </tr>
        <tr>
            <td colspan="2">손익분기점 매출액</td>
            <td id="sales_result"></td>
        </tr>
        <tr>
            <td class="hidden-tr"><button type="button" class="button" onclick="reSet()">초기화</button></td><td class="hidden-tr"></td>
            <td class="hidden-tr"><button type="button" class="button" onclick="resultValue()">결과보기</button></td>
        </tr>
    </table><br>
    <script>
        
        function inputValue(){
            const cost_1 = Number(document.getElementById('cost_1').value);
            const cost_2 = Number(document.getElementById('cost_2').value);
            const cost_3 = Number(document.getElementById('cost_3').value);
            const cost_4 = Number(document.getElementById('cost_4').value);
            const cost_5 = Number(document.getElementById('cost_5').value);
            const total_cost = document.getElementById('total_cost');
            
            const sum = cost_1 + cost_2 + cost_3 + cost_4 + cost_5;
            total_cost.innerText = sum.toLocaleString();
        }
        //결과보기
        function resultValue(){
            const sales = document.getElementById('sales').value;
            const total_cost = document.getElementById('total_cost').innerText;
            const sales_result = document.getElementById('sales_result');
            
            const count1 = Number(cost_1.value) + Number(cost_2.value);
            const count2 = sales - count1;
            const count3 = count2 / sales;
            const count4 = (Number(cost_3.value) + Number(cost_4.value) + Number(cost_5.value))
            const count5 = Math.round(count4 / count3);

            if(sales <= 0){
                window.alert("현재 매출액을 입력하세요.");
            }else if(count4 <= 0){
                window.alert("고정비를 입력하세요.");
            }else if(count1 > sales){
                window.alert("변동비가 매출액 보다 클 수 없습니다.");
            }else{
                sales_result.innerText = count5.toLocaleString();
            }
            
        }
        //초기화
        function reSet(){
            sales.value = null;
            cost_1.value = null;
            cost_2.value = null;
            cost_3.value = null;
            cost_4.value = null;
            cost_5.value = null;
            total_cost.innerText = null;
            sales_result.innerText = null;
        }
        //콤마찍기
        
    </script>
</body>
</html>